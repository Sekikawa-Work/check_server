# フィックスポイント プログラミング試験
A社の監視システムでは、監視対象となる複数台のサーバに対して一定間隔でping応答確認を行っており、確認結果は以下に示すカンマ区切りの形式で1行ずつ監視ログファイルに追記される。
<br>
`＜確認日時＞,＜サーバアドレス＞,＜応答結果＞`
<br>
確認日時は、`YYYYMMDDhhmmss`(年＝YYYY（4桁の数字）、月＝MM（2桁の数字。以下同様）、日＝DD、時＝hh、分＝mm、秒＝ss)である。
サーバアドレスは、ネットワークプレフィックス長付きのIPv4アドレスである。
応答結果には、pingの応答時間がミリ秒単位で記載される。ただし、タイムアウトした場合は"-"(ハイフン記号)となる。
<br>
本課題では、監視ログファイルはcsvとして扱い、テストには以下のようなlog.csvを使用した。使用言語はPythonである。
```
20201019133024,10.20.30.1/16,1
20201019133025,10.20.30.2/16,980
20201019133034,192.168.1.1/24,43
20201019133035,192.168.1.2/24,15
20201019133124,10.20.30.1/16,2
20201019133125,10.20.30.2/16,-
20201019133134,192.168.1.1/24,10
20201019133135,192.168.1.2/24,-
20201019133224,10.20.30.1/16,522
20201019133225,10.20.30.2/16,-
20201019133234,192.168.1.1/24,8
20201019133235,192.168.1.2/24,-
20201019133324,10.20.30.1/16,-
20201019133325,10.20.30.2/16,2
20201019133334,192.168.1.1/24,105
20201019133335,192.168.1.2/24,-
20201019133424,10.20.30.1/16,88
20201019133425,10.20.30.2/16,2
20201019133434,192.168.1.1/24,8
20201019133435,192.168.1.2/24,15
```
## 設問1
上記仕様の監視ログファイルを読み込み、故障状態のサーバアドレスとそのサーバの故障期間を出力するメソッド`find_timed_out_ip`を作成した。引数は監視ログファイルの名前である。
手順は以下の通りである。

1. 読み込んだ監視ログファイルを行ごとに参照する。
2. 以前の実行でタイムアウトしていない状態で応答結果からタイムアウトが確認できた場合、確認時刻とIPv4アドレスの組を記録する。
3. IPv4アドレスが記録したものと一致するかつタイムアウトしていない行が出た場合、そのIPv4アドレスおよび記録した確認日時を`＜サーバアドレス＞,＜故障期間(秒)＞`のフォーマットで出力する。

## 設問2
ネットワークの状態によっては、pingの応答が無い状態でも、一定時間するとpingの応答が復活することがある。そこで、N回以上連続してタイムアウトした場合にのみ故障とみなすようにメソッド`find_timed_out_ip`を拡張した。拡張したメソッド`find_timed_out_ip_N`の動作で設問1と違う点は、アドレスを記録するリストに連続でタイムアウトした回数が加えられていて2回目以降のタイムアウトで加算されること、その回数がN以上となったときにエラーとして出力されることである。

## 設問3

## 設問4